<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="SscPatrolLogger.MainPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:local="clr-namespace:SscPatrolLogger"
    xmlns:viewmodels="clr-namespace:SscPatrolLogger.ViewModels"
    x:DataType="viewmodels:MainPageViewModel"
    Title="Main">

    <Grid Padding="20" RowDefinitions="Auto,*">

        <!-- Top content -->
        <ScrollView Grid.Row="0">
            <VerticalStackLayout Spacing="10">

                <Border StrokeThickness="1" StrokeShape="RoundRectangle 8" Padding="5">
                    <VerticalStackLayout Spacing="5">
                        <HorizontalStackLayout Spacing="5">
                            <Label Text="Send-to email:" FontAttributes="Bold" Opacity="0.70" />
                            <Label Text="{Binding SendToEmailDisplay}" Opacity="0.70" />
                        </HorizontalStackLayout>
                        <Label Text="Used when you submit patrol logs." FontSize="12" Opacity="0.40" />
                    </VerticalStackLayout>
                </Border>

                <!-- Shift Picker -->
                <VerticalStackLayout>
                    <Label Text="Shift" FontAttributes="Bold" FontSize="18" />
                    <Picker ItemsSource="{Binding Shifts}"
                        SelectedItem="{Binding SelectedShift}" />
                </VerticalStackLayout>

                <!-- Patrol Picker -->
                <VerticalStackLayout>
                    <Label Text="Patrol Location" FontAttributes="Bold" FontSize="18" />
                    <Picker ItemsSource="{Binding Patrols}"
                        SelectedItem="{Binding SelectedPatrol}" />
                </VerticalStackLayout>

                <!-- Start/End -->
                <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                    <Border Padding="10" StrokeThickness="1" Stroke="#CCC" StrokeShape="RoundRectangle 8">
                        <VerticalStackLayout>
                            <Label Text="Start" FontAttributes="Bold" />
                            <Label Text="{Binding StartTimeText}" />
                        </VerticalStackLayout>
                    </Border>

                    <Border Grid.Column="1" Padding="10" StrokeThickness="1" Stroke="#CCC" StrokeShape="RoundRectangle 8">
                        <VerticalStackLayout>
                            <Label Text="End" FontAttributes="Bold" />
                            <Label Text="{Binding EndTimeText}" />
                        </VerticalStackLayout>
                    </Border>
                </Grid>

                <!-- Buttons -->
                <Button Text="{Binding StartEndButtonText}"
                    BackgroundColor="Blue"
                    Command="{Binding StartEndCommand}" />

                <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                    <Button Text="Reset Patrol"
                        BackgroundColor="Red"
                        Command="{Binding ResetPatrolCommand}" />
                    <Button Grid.Column="1"
                        Text="Reset All"
                        BackgroundColor="Red"
                        Command="{Binding ResetAllCommand}" />
                </Grid>

                <Button Text="Submit All"
                    BackgroundColor="Green"
                    Command="{Binding SubmitAllCommand}" />

                <Label Text="Patrol Status"
                   FontAttributes="Bold"
                   FontSize="20" />

            </VerticalStackLayout>
        </ScrollView>

        <!-- Status list -->
        <CollectionView
        Grid.Row="1"
        ItemsSource="{Binding StatusItems}"
        ItemsLayout="VerticalList">
            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="viewmodels:PatrolStatusItem">
                    <Label Text="{Binding StatusText}" />
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

    </Grid>

</ContentPage>
